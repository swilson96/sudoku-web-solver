(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{2026:function(t,i,e){Promise.resolve().then(e.bind(e,9444))},9444:function(t,i,e){"use strict";e.r(i),e.d(i,{default:function(){return solver_Solver}});var r=e(7437),s=e(2265);function Cell(t){let{rowIndex:i,colIndex:e,value:o,setValue:l,touched:n,setTouched:a}=t,h=(0,s.useMemo)(()=>{let t="p-0.5 sm:p-3 h-15 w-15";return(2===e||5===e)&&(t+=" border-r-2"),(2===i||5===i)&&(t+=" border-b-2"),t},[e,i]),u=(0,s.useMemo)(()=>t=>{t.currentTarget.value&&""!=t.currentTarget.value?(l(Number(t.currentTarget.value)),a(!0)):(l(null),a(!1))},[l,a]);return(0,r.jsx)("div",{className:h,children:(0,r.jsx)("input",{value:o||"",onChange:u,className:"h-8 w-8 sm:h-12 sm:w-12 p-1 sm:p-3 "+(n?"bg-gray-600":"bg-gray-800"),type:"number",min:"1",max:"9"})})}function Grid(t){let{value:i,setValue:e,touched:o,setTouched:l}=t,n=(0,s.useMemo)(()=>(t,r)=>s=>{let o=[...i.map((i,e)=>e===t?[...i.map((t,i)=>i===r?s:t)]:[...i])];e(o)},[e,i]),a=(0,s.useMemo)(()=>(t,i)=>e=>{let r=[...o.map((r,s)=>s===t?[...r.map((t,r)=>r===i?e:t)]:[...r])];l(r)},[l,o]);return(0,r.jsx)("div",{className:"grid grid-cols-9 p-1",children:Array.from({length:9},(t,e)=>(0,r.jsx)(s.Fragment,{children:Array.from({length:9},(t,s)=>(0,r.jsx)(Cell,{rowIndex:e,colIndex:s,value:i[e][s],setValue:n(e,s),touched:o[e][s],setTouched:a(e,s)},s))},e))})}let initialiseArray=(t,i,e)=>{let r=Array(t);for(let s=0;s<t;++s)if(r[s]=Array(i),e)for(let t=0;t<i;++t)r[s][t]=Array(e);return r};let Solver=class Solver{solve(t){for(let i=0;i<9;i++)for(let e=0;e<9;e++)this.sudokuGrid[i][e]=t[i][e]||0;return this.findSolution()}findSolution(){if(!this.isValid(this.sudokuGrid))throw Error("Invalid Sudoku");for(let t=0;t<9;t++)for(let i=0;i<9;i++)for(let e=0;e<9;e++)this.possibilities[t][i][e]=1;for(;!this.finished()&&(this.basic(),!this.exit);)if(!this.change&&!this.makeGuess()){try{this.guess2()}catch(t){throw Error("Failed to solve this one!")}break}return this.sudokuGrid}isValid(t){let i=Array(10),e=Array(10),r=Array(10);for(let s=0;s<9;s++){for(let t=0;t<10;t++)i[t]=0,e[t]=0,r[t]=0;for(let o=0;o<9;o++)if(i[t[s][o]]++,i[t[s][o]]>1&&t[s][o]>0||(e[t[o][s]]++,e[t[o][s]]>1&&t[o][s]>0)||(r[t[3*Math.floor(s/3)+o%3][3*s%9+Math.floor(o/3)]]++,r[t[3*Math.floor(s/3)+o%3][3*s%9+Math.floor(o/3)]]>1&&t[3*Math.floor(s/3)+o%3][3*s%9+Math.floor(o/3)]>0))return!1}return!0}updateGrid(){for(let t=0;t<9;t++)for(let i=0;i<9;i++)if(0==this.sudokuGrid[t][i]){let e=0;for(let r=0;r<9;r++)e+=this.possibilities[t][i][r];if(1==e){for(let e=0;e<9;e++)if(1==this.possibilities[t][i][e]){this.sudokuGrid[t][i]=e+1,this.change=!0;break}}if(e<1){this.log("Update error: no possibilities found for [".concat(t,", ").concat(i,"]")),this.contradiction=!0;return}}}updateGrid2(){let t=[,,,];for(let i=1;i<10;i++)for(let e=0;e<9;e++){for(let i=0;i<3;i++)t[i]=0;for(let r=0;r<9;r++)t[0]+=this.possibilities[e][r][i-1],t[1]+=this.possibilities[r][e][i-1],t[2]+=this.possibilities[3*Math.floor(e/3)+r%3][3*e%9+Math.floor(r/3)][i-1];if(1==t[0]){for(let t=0;t<9;t++)if(1==this.possibilities[e][t][i-1]){0==this.sudokuGrid[e][t]&&(this.change=!0),this.sudokuGrid[e][t]=i;break}}if(t[0]<1){this.log("Update2 error: nowhere to put ".concat(i," in column ").concat(e)),this.contradiction=!0;return}if(1==t[1]){for(let t=0;t<9;t++)if(1==this.possibilities[t][e][i-1]&&0==this.sudokuGrid[t][e]){this.sudokuGrid[t][e]=i,this.change=!0;break}}if(t[1]<1){this.log("Update2 error: nowhere to put ".concat(i," in row ").concat(e)),this.contradiction=!0;return}if(1==t[2]){for(let t=0;t<9;t++)if(1==this.possibilities[3*Math.floor(e/3)+t%3][3*e%9+Math.floor(t/3)][i-1]){0==this.sudokuGrid[3*Math.floor(e/3)+t%3][3*e%9+Math.floor(t/3)]&&(this.change=!0),this.sudokuGrid[3*Math.floor(e/3)+t%3][3*e%9+Math.floor(t/3)]=i;break}}if(t[2]<1){this.log("Update2 error: nowhere to put ".concat(i," in box ").concat(e)),this.contradiction=!0;return}}}reduce(){for(let t=0;t<9;t++)for(let i=0;i<9;i++)if(this.sudokuGrid[t][i]>0){for(let e=0;e<9;e++)this.possibilities[t][e][this.sudokuGrid[t][i]-1]=0,this.possibilities[e][i][this.sudokuGrid[t][i]-1]=0,this.possibilities[t][i][e]=0;for(let e=0;e<3;e++)for(let r=0;r<3;r++)this.possibilities[3*Math.floor(t/3)+e][3*Math.floor(i/3)+r][this.sudokuGrid[t][i]-1]=0;this.possibilities[t][i][this.sudokuGrid[t][i]-1]=1}}finished(){for(let t=0;t<9;t++)for(let i=0;i<9;i++)if(0==this.sudokuGrid[t][i])return!1;return this.log("Solved it! (Whole grid is complete)"),!0}basic(){let t=0;for(this.contradiction=!1,this.change=!0;this.change&&!this.finished();){if(this.reduce(),this.change=!1,this.updateGrid(),this.updateGrid2(),!this.isValid(this.sudokuGrid)||this.contradiction)throw Error("No solution exists");++t}this.change||this.log("Basic passes exhausted after ".concat(t," passes."))}makeGuess(){let t=!1,i=1,e=initialiseArray(9,9),r=initialiseArray(9,9,9);for(let s=0;s<9;s++)for(let o=0;o<9;o++)if(0==this.sudokuGrid[s][o]){for(let l=1;l<=9;l++)if(1==this.possibilities[s][o][l-1]){this.log("Conjecturing that [".concat(s,", ").concat(o,"] contains ").concat(l,"..."));for(let t=0;t<9;t++)for(let i=0;i<9;i++){e[t][i]=this.sudokuGrid[t][i];for(let e=0;e<9;e++)r[t][i][e]=this.possibilities[t][i][e]}for(this.sudokuGrid[s][o]=l,this.contradiction=!1;i<=100;){if(this.reduce(),this.change=!1,this.updateGrid(),this.contradiction||this.updateGrid2(),this.finished())return this.log("done, leading to the solution"),!0;if(!this.isValid(this.sudokuGrid)||this.contradiction){r[s][o][l-1]=0,t=!0,this.log("done, ruled it out.");break}if(!this.change){this.log("done, got stuck.");break}i++}for(let t=0;t<9;t++)for(let i=0;i<9;i++){this.sudokuGrid[t][i]=e[t][i];for(let e=0;e<9;e++)this.possibilities[t][i][e]=r[t][i][e]}}if(t)return!0}return t}guess2(){let t=initialiseArray(9,9,9);this.log("Beginning an exhaustive backtracking search.");for(let i=0;i<9;i++)for(let e=0;e<9;e++)for(let r=0;r<9;r++)t[i][e][r]=this.possibilities[i][e][r];let i=0,e=0,r=1;for(;i<9;){for(;e<9;){for(;r<10;){if(1==this.possibilities[i][e][r-1]){this.sudokuGrid[i][e]=r,r=1;break}r++}if(r>=10){0===e?(i--,e=8):e--,r=this.sudokuGrid[i][e]+1,this.sudokuGrid[i][e]=0;for(let i=0;i<9;++i)for(let e=0;e<9;++e)for(let r=0;r<9;++r)this.possibilities[i][e][r]=t[i][e][r];this.reduce()}else this.reduce(),e++,r=1}i++,e=0}this.log("Finished.")}constructor(t){this.sudokuGrid=initialiseArray(9,9),this.possibilities=initialiseArray(9,9,9),this.exit=!1,this.change=!1,this.contradiction=!1,this.log=t||console.log}};let o=[],l=[];for(let t=0;t<9;++t){o[t]=[],l[t]=[];for(let i=0;i<9;++i)o[t][i]=null,l[t][i]=!1}function solver_Solver(){let[t,i]=(0,s.useState)(o),[e,n]=(0,s.useState)(l),[a,h]=(0,s.useState)("");return(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),h("");try{let e=new Solver,r=e.solve(t);i(r)}catch(t){h(t instanceof Error?t.message:String(t))}},children:[!!a&&(0,r.jsx)("p",{className:"p-3 text-red-600",children:a}),!a&&(0,r.jsx)("p",{className:"p-3",children:'Enter what you know and click "Solve"'}),(0,r.jsx)(Grid,{value:t,setValue:i,touched:e,setTouched:n}),(0,r.jsx)("button",{type:"submit",className:"mx-3 mt-12 px-8 py-4 bg-gray-700 hover:bg-gray-600",children:"Solve"}),(0,r.jsx)("button",{type:"button",onClick:()=>{i([...t.map((t,i)=>[...t.map((t,r)=>e[i][r]?t:null)])])},className:"mx-3 mt-12 px-8 py-4 bg-gray-800 hover:bg-gray-600",children:"Clear solution"}),(0,r.jsx)("button",{type:"button",onClick:()=>{i(o),n(l)},className:"mx-3 mt-12 px-8 py-4 bg-gray-800 hover:bg-gray-600",children:"Clear all"})]})}},622:function(t,i,e){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=e(2265),s=Symbol.for("react.element"),o=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),l=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,n={key:!0,ref:!0,__self:!0,__source:!0};function q(t,i,e){var r,a={},h=null,u=null;for(r in void 0!==e&&(h=""+e),void 0!==i.key&&(h=""+i.key),void 0!==i.ref&&(u=i.ref),i)o.call(i,r)&&!n.hasOwnProperty(r)&&(a[r]=i[r]);if(t&&t.defaultProps)for(r in i=t.defaultProps)void 0===a[r]&&(a[r]=i[r]);return{$$typeof:s,type:t,key:h,ref:u,props:a,_owner:l.current}}i.jsx=q,i.jsxs=q},7437:function(t,i,e){"use strict";t.exports=e(622)}},function(t){t.O(0,[971,472,744],function(){return t(t.s=2026)}),_N_E=t.O()}]);